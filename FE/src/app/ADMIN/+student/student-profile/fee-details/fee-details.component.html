<div>
    <div class="m-1 my-2 m-md-2 m-lg-3 time-table">
        <table mat-table [dataSource]="installmentWithFeeDetail" class="w-100 table-width mat-elevation-z8">

            <!-- installmentName Column -->
            <ng-container matColumnDef="installmentName">
                <th mat-header-cell *matHeaderCellDef> Installment </th>
                <td mat-cell *matCellDef="let element"> {{element.installment_name}} </td>
            </ng-container>

            <!-- feeDueDate Column -->
            <ng-container matColumnDef="feeDueDate">
                <th mat-header-cell *matHeaderCellDef> Due Date </th>
                <td mat-cell *matCellDef="let element"> {{element.fee_due_date | date}} </td>
            </ng-container>

            <!-- feeStatus Column -->
            <ng-container matColumnDef="feeStatus">
                <th mat-header-cell *matHeaderCellDef> Status </th>
                <td mat-cell *matCellDef="let element">
                    <span *ngIf="element.fee_paid_amount == 0">Unpaid</span>
                    <span *ngIf="element.fee_paid_amount == element.installment_amount">Paid</span>
                    <span *ngIf="element.fee_paid_amount != 0 && element.fee_paid_amount != element.installment_amount">Partial</span>
                </td>
            </ng-container>

            <!-- installmentAmount Column -->
            <ng-container matColumnDef="installmentAmount">
                <th mat-header-cell *matHeaderCellDef> Amount </th>
                <td mat-cell *matCellDef="let element"> {{element.installment_amount}} </td>
            </ng-container>

            <!-- paymentId Column -->
            <ng-container matColumnDef="paymentId">
                <th mat-header-cell *matHeaderCellDef> Pay Id </th>
                <td mat-cell *matCellDef="let element">
                    <span *ngIf="element.receipt_id < 0; else receiptId"></span>
                    <ng-template #receiptId>{{element.receipt_id}}</ng-template>
                </td>
            </ng-container>

            <!-- paymentMode Column -->
            <ng-container matColumnDef="paymentMode">
                <th mat-header-cell *matHeaderCellDef> Pay Mode </th>
                <td mat-cell *matCellDef="let element"> {{element.payment_mode}} </td>
            </ng-container>

            <!-- paymentDate Column -->
            <ng-container matColumnDef="paymentDate">
                <th mat-header-cell *matHeaderCellDef> Pay Date </th>
                <td mat-cell *matCellDef="let element"> {{element.paid_on | date}} </td>
            </ng-container>

            <!-- paidAmount Column -->
            <ng-container matColumnDef="paidAmount">
                <th mat-header-cell *matHeaderCellDef> Paid </th>
                <td mat-cell *matCellDef="let element"> {{element.fee_paid_amount}} </td>
            </ng-container>

            <!-- remainingAmount Column -->
            <ng-container matColumnDef="remainingAmount">
                <th mat-header-cell *matHeaderCellDef> Remaining </th>
                <td mat-cell *matCellDef="let element"> {{element.remaining_amount}} </td>
            </ng-container>

            <!-- action Column -->
            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef> Action </th>
                <td mat-cell *matCellDef="let element">
                    <mat-icon (click)="openFeeCollectFialog(element.installment_id,element.installment_amount,element.installment_name)" class="font-weight-bold">add</mat-icon>
                    <mat-icon (click)="returnFee(element.installment_id)" class="font-weight-bold">undo</mat-icon>
                    <mat-icon class="font-weight-bold">print</mat-icon>
                </td>
            </ng-container>

            <tr class="table-header form-toolbar" mat-header-row *matHeaderRowDef="feeChartColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: feeChartColumns;"></tr>
        </table>
    </div>
</div>